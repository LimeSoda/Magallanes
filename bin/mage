#!/usr/bin/env php
<?php
/*
 * This file is part of the Magallanes package.
*
* (c) Andrés Montañez <andres@andresmontanez.com>
*
* For the full copyright and license information, please view the LICENSE
* file that was distributed with this source code.
*/
$timezone = ini_get('date.timezone');
if (empty($timezone)) {
    date_default_timezone_set('UTC');
}

$baseDir = dirname(dirname(__FILE__));

define('MAGALLANES_VERSION', '2.0-dev');
define('MAGALLANES_DIRECTORY', $baseDir);

if (file_exists(__DIR__ . '/../vendor/autoload.php')) {
    require_once __DIR__ . '/../vendor/autoload.php';
} elseif (file_exists(__DIR__ . '/../../../autoload.php')) {
    require_once __DIR__ . '/../../../autoload.php';
} else {
    echo 'Autoload not found. Please run composer install' . PHP_EOL;
    exit(1);
}

// Clean arguments
array_shift($argv);

// Run Magallanes
$console = new Mage\Console();
$exitCode = $console->run($argv);

exit((int) $exitCode);
